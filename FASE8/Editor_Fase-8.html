<!doctype html>

<title>P5 Industries - FASE 08</title>
<meta charset="utf-8"/>
<link rel=stylesheet href="codemirror/doc/docs.css">

<link rel=stylesheet href=codemirror/lib/codemirror.css>
<script src=codemirror/lib/codemirror.js></script>
<script src=codemirror/mode/xml/xml.js></script>
<script src=codemirror/mode/javascript/javascript.js></script>
<script src=codemirror/mode/css/css.js></script>
<script src="codemirror/addon/edit/closetag.js"></script>
<link href="codemirror/theme/ambiance.css" rel="stylesheet"/>
<script src="https://code.jquery.com/jquery-3.4.1.js"></script>

<style rel= "stylesheet" type= text/css>
  @import url('css_fase_8.css');
</style>

<body>
    <img src="Canvas - Teste.png" class="fundo">
    <textarea id=code name=code>
      <html>
        <head>
          <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.8.0/p5.js"></script>
          <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.8.0/addons/p5.sound.js"></script>
          <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.8.0/addons/p5.dom.js"></script>
          <script src="https://cdn.jsdelivr.net/gh/molleindustria/p5.play@master/lib/p5.play.js"></script>
        </head>
        <body>
          <script>
var boneco, obstacle = [], box, coin;

function preload(){
}

function setup(){
  createCanvas(435,330);
    obstacle[0] = createSprite(217, 10,435, 20);
    obstacle[1] = createSprite(10, 165, 20, 330);
    obstacle[2] = createSprite(217, 320, 435, 20);
    obstacle[3] = createSprite(425, 165, 20, 330);
    obstacle[4] = createSprite(75,10, 20, 330);
    obstacle[5] = createSprite(145,250, 20, 330);
  
    boneco = createSprite(300, 200, 25, 25);

    box = createSprite(200, 100, 25, 25);

    coin = createSprite(40, 40, 25, 25)
}

function draw(){
  background(255);
  boneco.friction = 0.3
    if(keyDown('LEFT_ARROW')) boneco.velocity.x = -4;
    if(keyDown('RIGHT_ARROW')) boneco.velocity.x = 4;
    if(keyDown('DOWN_ARROW')) boneco.velocity.y = 4;
    if(keyDown('UP_ARROW')) boneco.velocity.y = -4;
    
    for(var i=0; i <6; i++){
      boneco.collide(obstacle[i]);
        if(!box.collide(obstacle[i])) boneco.displace(box);
        else boneco.collide(box);
            
        if(box.overlap(coin)) {
          coin.remove();
          text("PARABENS, PROSSIGA", 200, 100);
          }        
    }
  
      drawSprites();
  } 
          </script>
        </body>
      </html>
    </textarea>
    <iframe id=preview></iframe> 
    <script src="setup_editor_8.js"></script> <!-- VAI PARA O ARQUIVO REFERENTE AO EDITOR -->

    <button onclick= "updatePreview()" class= "button_run">RUN CODE</button>
    <button onclick= "refreshPreview()" class= "button_refresh">REFRESH CODE</button>
    
  </body>
</html>